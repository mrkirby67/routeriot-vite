<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route Riot ‚Äì Control</title>
  <link rel="stylesheet" href="/style.css" />

  <!-- Favicons -->
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="manifest" href="/site.webmanifest" />
</head>

<body>
  <div class="container">
    <!-- üéÆ Core Game Controls -->
    <div id="game-controls-container"></div>

    <!-- üßÆ Scoreboard -->
    <div id="scoreboard-container"></div>

    <!-- üîó Team Links -->
    <div id="team-links-container"></div>

    <!-- üèÅ Racer Management -->
    <div id="racer-management-container"></div>

    <!-- üó∫Ô∏è Zone Management -->
    <div id="zone-management-container"></div>

    <!-- üöß Speed Bump Control -->
    <div id="speedbump-control-container"></div>

    <!-- üêû Sabotage Launcher -->
    <div id="sabotage-launcher-container"></div>

    <!-- ‚ùì Zone Questions (new) -->
    <div id="zone-questions-container"></div>

    <!-- ü™∞ Bug Strike Control -->
    <div id="bugstrike-control-container"></div>

    <!-- üß© Game Challenges -->
    <div id="game-challenges-container"></div>

    <!-- üì¢ Broadcasts -->
    <div id="broadcast-container"></div>

    <!-- ‚èØ Manual Controls -->
    <div class="manual-controls" style="text-align:center; margin-top:20px;">
      <button id="pause-btn">‚è∏Ô∏è Pause Game</button>
      <button id="release-zones-btn">üåç Release Zones</button>
      <button id="resume-btn">‚ñ∂Ô∏è Resume Game</button>
    </div>
  </div>

  <!-- üßæ Modal -->
  <div id="roster-modal" class="modal-backdrop" style="display: none;">
    <div class="modal-content">
      <span class="modal-close-btn">&times;</span>
      <h2>Team Rosters &amp; Links</h2>
      <p>Email the unique player URL to each team captain.</p>
      <div id="roster-modal-body"></div>
    </div>
  </div>

  <!-- üí° Control Orchestrator -->
  <script type="module" src="./control.js"></script>

  <!-- Inline fallback (for dev mode / isolated testing) -->
  <!--
  <script type="module">
    import {
      GameControlsComponent, initializeGameControlsLogic
    } from './components/GameControls/GameControls.js';
    import {
      BugStrikeControlComponent, initializeBugStrikeControl
    } from './components/BugStrikeControl/BugStrikeControl.js';
    import {
      SpeedBumpControlComponent, initializeSpeedBumpControl
    } from './components/SpeedBumpControl/SpeedBumpControl.js';
    import {
      SabotageLauncherComponent, initializeSabotageLauncher
    } from './components/SabotageLauncher/SabotageLauncher.js';
    import {
      RacerManagementComponent, initializeRacerManagementLogic
    } from './components/RacerManagement/RacerManagement.js';
    import {
      ZoneManagementComponent, initializeZoneManagementLogic
    } from './components/ZoneManagement/ZoneManagement.js';
    import {
      ZoneQuestionsComponent, initializeZoneQuestionsUI
    } from './components/ZoneQuestions/ZoneQuestions.js';
    import {
      ScoreboardComponent, initializeScoreboardListener
    } from './components/Scoreboard/Scoreboard.js';
    import {
      GameChallengesComponent, initializeGameChallengesLogic
    } from './components/GameChallenges/GameChallenges.js';
    import {
      BroadcastComponent, initializeBroadcastLogic
    } from './components/Broadcast/Broadcast.js';
    import { TeamLinksComponent } from './components/TeamLinks/TeamLinks.js';
    import { listenToAllMessages } from './modules/chatManager.js';
    import { loadGoogleMapsApi } from './modules/googleMapsLoader.js';

    async function main() {
      document.getElementById('game-controls-container').innerHTML   = GameControlsComponent();
      document.getElementById('bugstrike-control-container').innerHTML = BugStrikeControlComponent();
      document.getElementById('speedbump-control-container').innerHTML = SpeedBumpControlComponent();
      document.getElementById('sabotage-launcher-container').innerHTML = SabotageLauncherComponent();
      document.getElementById('scoreboard-container').innerHTML      = ScoreboardComponent();
      document.getElementById('team-links-container').innerHTML      = TeamLinksComponent();
      document.getElementById('racer-management-container').innerHTML= RacerManagementComponent();
      document.getElementById('zone-management-container').innerHTML = ZoneManagementComponent();
      document.getElementById('zone-questions-container').innerHTML  = ZoneQuestionsComponent();
      document.getElementById('game-challenges-container').innerHTML = GameChallengesComponent();
      document.getElementById('broadcast-container').innerHTML       = BroadcastComponent();

      initializeScoreboardListener();
      initializeGameControlsLogic();
      initializeBugStrikeControl();
      initializeSpeedBumpControl();
      initializeSabotageLauncher();
      initializeRacerManagementLogic();
      initializeGameChallengesLogic();
      initializeBroadcastLogic();
      listenToAllMessages();

      try {
        await loadGoogleMapsApi();
        initializeZoneManagementLogic(true);
        await initializeZoneQuestionsUI();
      } catch (err) {
        console.error('‚ùå Failed to load Maps or Questions:', err);
      }
    }

    document.addEventListener('DOMContentLoaded', main);
  </script>
  -->
</body>
</html>
