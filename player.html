<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Route Riot ‚Äì Player</title>
  <meta name="description" content="Route Riot Player Dashboard ‚Äì view team info, chat, zones, and live scores.">
  <meta name="theme-color" content="#0d1117" />

  <!-- Favicons -->
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="manifest" href="/site.webmanifest" />

  <link rel="stylesheet" href="style.css" />
  <script type="module" src="/core/runtime-config.js"></script>

  <style>
    /* ------------------------------------------------------------------
       ROUTE RIOT DARK THEME
    ------------------------------------------------------------------ */
    body {
      font-family: "Segoe UI", system-ui, sans-serif;
      background: #0d1117;
      color: #e6edf3;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 1.5rem;
    }
    h1, h2, h3 {
      color: #58a6ff;
      margin-bottom: 0.4em;
    }
    .slogan {
      font-style: italic;
      color: #9baec8;
      margin-top: -0.2em;
      margin-bottom: 1em;
    }
    .control-section {
      background: #161b22;
      border: 1px solid #30363d;
      border-radius: 10px;
      padding: 1rem 1.5rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }
    table.data-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 0.5rem;
    }
    table.data-table th, table.data-table td {
      border: 1px solid #30363d;
      padding: 0.5rem;
      text-align: left;
    }
    table.data-table th {
      background: #21262d;
      color: #58a6ff;
    }
    table.data-table tr:nth-child(even) {
      background: #1c1f26;
    }
    button {
      background: #238636;
      border: none;
      color: #fff;
      padding: 0.4rem 0.8rem;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.2s ease-in-out;
    }
    button:hover { background: #2ea043; }
    .log-box {
      background: #0e1117;
      border: 1px solid #30363d;
      border-radius: 6px;
      padding: 0.6rem;
      max-height: 250px;
      overflow-y: auto;
      font-size: 0.95em;
    }
    .broadcast-message-display {
      background: #222;
      color: #fff;
      padding: 10px;
      border-radius: 6px;
      margin-top: 10px;
      display: none;
      text-align: center;
      font-weight: bold;
    }
    ul#team-member-list {
      list-style: none;
      padding-left: 0;
    }
    ul#team-member-list li {
      margin: 4px 0;
      padding: 4px 8px;
      background: #1c2128;
      border-radius: 4px;
    }
    .status-taken { opacity: 0.6; border: 2px solid #c62828; }
    .status-available { border: 2px solid #2e7d32; }
    .team-chat-input {
      display: flex;
      gap: 0.5rem;
      margin-top: 0.75rem;
    }
    .team-chat-input input {
      flex: 1;
      padding: 0.45rem 0.6rem;
      border-radius: 6px;
      border: 1px solid #30363d;
      background: #161b22;
      color: #e6edf3;
    }

    /* üåü Flash animation for location updates */
    #player-location.flash {
      background: #f0c420;
      color: #000;
      padding: 2px 6px;
      border-radius: 4px;
      font-weight: bold;
      transition: background 0.8s ease-out;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1 id="team-name">Team Name Loading‚Ä¶</h1>
    <p id="team-slogan" class="slogan">Slogan Loading‚Ä¶</p>

    <!-- ‚úÖ Corrected Game Info section -->
    <div class="control-section">
      <h2>Game Info</h2>
      <p><strong>Status:</strong> <span id="game-status">Not Started</span></p>
<p><strong>Remaining Game Timer:</strong> <span id="timer-display">--:--:--</span></p>
<div id="rr-shield-timer"></div>

<div class="team-members">
  <h3>Your Team</h3>
  <ul id="team-member-list"><li>Loading team roster...</li></ul>
</div>
<hr style="border: 1px solid #30363d; margin: 1rem 0;">
<p id="home-base-display" class="slogan" style="font-weight:bold;">Home Base: --</p>
<hr style="border: 1px solid #30363d; margin: 1rem 0;">
    </div>

    <!-- 3Ô∏è‚É£ Unified Scoreboard -->
    <div class="control-section" id="scoreboard-container">
      <h2>Live Scoreboard</h2>
      <table class="data-table" id="player-scoreboard-table">
        <thead>
          <tr>
            <th>Team Name</th>
            <th>Score</th>
          </tr>
        </thead>
        <tbody id="player-scoreboard-tbody"></tbody>
      </table>
    </div>

    <!-- 4Ô∏è‚É£ Zones -->
    <div class="control-section">
      <h2>Zones</h2>
      <table class="data-table" id="player-zones-table">
        <thead>
          <tr>
            <th>Zone</th>
            <th>Map Preview</th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="player-zones-tbody"></tbody>
      </table>
    </div>

    <!-- 5Ô∏è‚É£ Challenge Box -->
    <div id="challenge-box" class="control-section" style="display:none;">
      <h2 id="challenge-zone-name">Challenge: Zone X</h2>
      <p id="challenge-question">Question will appear here‚Ä¶</p>
      <div id="challenge-answer-area"></div>
      <button id="submit-answer-btn">Submit Answer</button>
    </div>

    <!-- üéâ Team Surprises -->
    <section id="team-surprises-section" class="control-section">
      <div class="team-surprises-header">
        <h2>üéâ Team Surprises</h2>
        <span class="team-surprises-shield" data-role="shield-status">üõ°Ô∏è Shield inactive</span>
      </div>
      <div class="team-surprises-columns">
        <div class="team-surprises-self">
          <h3>Your Inventory</h3>
          <div id="team-surprises-body" class="team-surprises-myteam">
            <p class="team-surprises-placeholder">Loading your wild cards‚Ä¶</p>
          </div>
        </div>
        <div class="team-surprises-inventory">
          <h3>All Teams</h3>
          <ul id="team-surprise-inventory" class="team-surprises-list">
            <li class="team-surprises-empty">No surprise data yet.</li>
          </ul>
        </div>
      </div>
      <div class="team-surprises-outgoing" data-role="outgoing-speedbumps">
        <h3>Outgoing Speed Bumps</h3>
        <ul id="outgoing-speedbump-list" class="team-surprises-list">
          <li class="team-surprises-empty">No active Speed Bumps.</li>
        </ul>
      </div>
    </section>

    <!-- 6Ô∏è‚É£ Opponent Status & Messaging -->
    <div class="control-section">
      <h2>Opponent Status & Messaging</h2>
      <table class="data-table" id="opponents-table">
        <thead>
          <tr>
            <th>Team Name</th>
            <th>Last Known Location</th>
            <th>Send Message</th>
          </tr>
        </thead>
        <tbody id="opponents-tbody"></tbody>
      </table>
    </div>

    <!-- 7Ô∏è‚É£ Team Chat -->
    <div class="control-section">
      <h2>Team Chat</h2>
      <div id="team-chat-log" class="log-box">
        <p>Your team‚Äôs messages will appear here‚Ä¶</p>
      </div>
      <div class="team-chat-input">
        <input id="chat-input" type="text" placeholder="Message ALL Teams" />
        <button id="send-chat-button">Send</button>
      </div>
    </div>

    <!-- 8Ô∏è‚É£ Commissioner Broadcast -->
    <div id="commissioner-message" class="broadcast-message-display"></div>
  </div>

  <script type="module" src="player.js"></script>
  <script type="module" src="/ui/notifications/notifications.subscribe.js"></script>
  <script type="module" src="/ui/notifications/chat.subscribe.js"></script>
  <script type="module" src="/ui/notifications/flatTire.subscribe.js"></script>
  <script type="module" src="/ui/notifications/playerPage.subscribe.js"></script>
  <script type="module" src="/ui/overlays/speedbump.subscribe.js"></script>
  <script type="module" src="/ui/overlays/teamSurprise.subscribe.js"></script>
</body>
</html>
